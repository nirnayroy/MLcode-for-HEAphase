function [Y,Xf,Af] = IM10(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 22-Feb-2019 20:26:57.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx10 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx1 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.867076923076923;437.535;5.12923152138799;0;0.198515243345873;1.1657;0;1.61538461538462;25765000000;0.484122918275927];
x1_step1.gain = [2.08211997670356;0.000699024104098669;0.0016871699604234;0.0588456417471217;1.00064574972844;1.51941046873813;4.00249121426347;0.196969696969696;7.26043023634097e-12;0.0144813358040795];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.5002637620099807947;-1.3690707476230430384;0.96577074250498406993;1.8509086475710805342;2.3192579777153699006;1.1519311155576879013;1.397498851819508614;0.23345245248918544689;-0.42730693562865251778;0.11859988444957410281;0.59505942616422990987;-0.71379076233505422966;0.7936543596294690639;-0.40008177456340360267;1.6092902993398841005;-1.6705239528931541404;1.931185338238302851;2.0767948808813603279;-1.7328691987437268018;1.9270556612321509959];
IW1_1 = [0.069934883416772702924 -0.66572413400445540343 0.69806540957154383786 -0.22049697352244462811 1.9764169345034019454 0.89503373277634290517 -0.36252540652807757615 0.7969815248015043041 -0.70655489194308329637 1.1830364581351859865;-0.66999380428310173485 -0.049287483897635243901 0.27778845743725372186 -0.89738151426926726639 -2.3822033436234786308 -0.066400775265740050179 1.6623020281268385823 0.32391707826191501463 1.8775684304947923842 1.764270573330234404;0.14042369648233746227 0.42546813642356612339 -0.046417692293368728595 -0.69640533633337209363 -1.1582141830121508441 -0.48445738536516352868 1.2390664681540000114 -0.33492174271451163881 0.16622104326765457794 -1.0872858981939859113;1.0386018438180055767 2.5505609887949098891 -1.7936015745687270417 2.8007746537119029284 4.7533051416058560434 -1.2945740335943576316 -0.97297577537423141081 0.7169280039912396818 -0.73449808379212000453 0.51279559911235306213;0.54343981237735816681 3.476566758211472763 -0.83085198884546285214 2.2312688645497549267 2.4900024051846840756 -1.2253591800547514179 0.023018128734377023281 1.5406461417930485958 1.2012364359927045765 -0.32164341478803470942;-0.43121374110366722521 -0.074114972341233500974 -0.70780053485067107033 -0.34162519358509207956 0.11361614778154054128 -0.46531466770671148225 0.73974961411813511258 -0.35500135208845301493 0.90257527762137101934 -0.5151645835970809495;-0.35034117410310944285 1.0818193148612407217 -0.23049542266201267227 -0.56937630505786607227 0.30032241916236029899 -0.94080617658918785917 0.19017864445423734998 -0.58531203601173398265 0.49308365632136763601 -0.97892198858399526173;-2.7102810014221634383 -2.9987767063425612157 -2.0294096288581089382 -0.98423537654896675608 3.1167214496940758295 3.2153397820550928543 -1.7448735277300899682 1.211529525927371731 0.99739295018574758434 1.0199341533128454262;-1.2908219889348548914 -0.1752632554860794889 1.5361123105503882158 -1.807910640472503605 2.4546280348277300654 1.590132469265123083 -2.7031859828219721997 -0.37519191831040116236 0.48014107551710821786 0.36049348464041364171;-0.43300815760491095929 1.4019952064028184946 -0.96587297737780830609 1.024092045691926689 2.3687731552729793805 1.1046903395315446073 -0.845510910909324509 1.2704012015317889261 1.4619626507674639004 -0.46172375134477522396;-0.12975496377613832122 -0.022359643804054706723 -0.77985594211019737543 -0.50628650293541388461 -1.2938006121939891191 -0.61760396620603286166 0.82419565058221821996 0.40856319193487727892 0.34470417493478372473 2.9316212605350973064;1.1130754837182166295 -0.36084495308938197011 -0.53398420849096672747 1.1672548004474023742 -0.49761830273395030177 -1.5410203616353617129 0.031903352746728799727 1.5370447318701121464 0.20288439145982301026 -0.48653524220275645717;1.3419180879303824749 1.401959635042976382 -0.5603379211160653961 -0.69617082657695295023 1.900058577060446785 -1.9663302522483243617 -0.53543080049979363544 1.2207490342573572573 -1.0086057427053847224 -0.82137069749352453751;1.7748093421767732192 -2.7668765963886543524 0.28840394337040808903 -1.7692586550856297389 -1.9479774470741906267 0.11577821198609983266 -0.94558498577865790491 2.8805504662521519421 -1.8318204855947550769 0.85852967350691533621;-1.5663855320322082054 -0.81349142461341095167 0.99198411622349513816 0.0068384957477898404565 -0.081409682104266120617 1.3707052962352190839 -0.4647575370948989204 0.67823521941007303138 1.1130681821480306048 -1.009424049404945789;-0.97726179601034746103 -1.6617582705816940081 1.0243853369397204478 1.1101386474848053965 -1.7785870337104157102 0.13479753907320582429 3.3310574909280101785 -0.074551253407438886067 -0.72413608503479809375 -0.37185269529489373141;0.35392749039037213477 -0.8375652048684794071 0.69060889864371421965 -0.4065747307272472022 0.98262629339752416424 -1.0127025026471947466 0.30811113964093461703 -0.66690674308904018819 -0.74599420799983340302 0.97002841006376550048;0.27725075676339772102 -0.3778292953158522427 0.95333236398319376459 -0.24704945886254142673 -0.085874909412772953976 0.90634303897453161181 -0.44231966511679066123 0.43173067686494276396 0.513400471219315091 1.4301536900375468875;-1.168136280414770356 2.0264975869986452395 -1.2247906097217509114 0.53745045868180407744 -0.88612596829737910742 1.4132088735102379395 -1.1087878107593363008 0.58955600479758929477 0.57682344531573515045 -0.15131480177622161354;0.43972129812245808189 0.58722733557776618518 -0.59946652689709356565 1.1375099869929106156 -1.014190335128938969 0.025955101990351656105 1.0114575658884856768 -0.19306056540444913039 -0.69968953614688944587 0.0062305028602702948459];

% Layer 2
b2 = 1.0686288599534712329;
LW2_1 = [-2.4348969154826778372 2.8127426810009716895 1.7493743366832594788 -3.7349854300109410765 -1.7159680052434853614 0.060539171779313429023 0.37288243564558293253 3.284458341419406846 2.6575426960638890428 -0.88544289755731264702 -2.105618094292859066 1.3840173110767601816 -0.47970845434357561876 -2.9825504408781262633 -0.57523777575233436821 3.6480693075536505532 1.7301727089860263753 -1.4487489862677800367 -2.1863396380598612012 0.92895629035718574329];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n,~)
a = 1 ./ (1 + exp(-n));
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
